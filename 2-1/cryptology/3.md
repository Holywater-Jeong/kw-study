# 3주차. 암호의 세계

# 암호

## 암호에서 사용하는 이름

- 엘리스(송신자)와 밥(수신자)
- 이브: 도청자
- 맬로리: 공격자 (중간에 갈취 후 수정한 메시지 전송)
- 트렌트: 중재자
- 빅터: 검증

## 암호화와 복호화

- 평문: 암호화 전 메시지
- 암호문: 암호화한 후 메시지
- 암호 기술: 중간에서 도청자가 암호문을 가로채어 갖더라도 특정 비밀 값을 모른다면 암호문을 평문으로 복호화할 수 없도록 하는 기술
  - 복호화보다 복호가 더 맞는 표현이긴하다
- 암호화: 평문을 암호화 키를 이용해서 암호문을 만든다
- 복호화: 엄호문을 복호화 키를 이용해서 평문을 만든다

## 암호의 기밀성

- 암호 기술을 사용해서 내용을 비밀로 유지

## 해독

- 복호화: 정당한 수신자가 암호문을 평문으로 바꾸는 것
- 암호 해독: 수신자 이외 사람이 암호문으로부터 평문을 복원하려고 시도하는 것
  - 주요 목적: 암호화에 사용되는 비밀 정보(키)를 알아내는 것
  - 단순히 암호화 과정이나 복호화 과정의 약점을 알아내는 행위
- 암호 해독자: 암호 해독 하는 사람
  - 나쁜 의도를 가진자
  - 암호 연구자(암호의 강도)

# 암호화와 복호화의 기호적 표현

## 암호 시스템의 요소

- 평문
- 암호문
- 암호 알고리즘
- 복호 알고리즘
- 키

## 기호 표현

- C = EK(P): 평문 P를 키 K로 암호화하여(E) 암호문 C를 얻는다 = E(K,P)
- P = DK(C): 암호문 C를 키 K로 복호화하여(D) 평문 P를 얻는다 = D(K,C)
  - P: 평문
  - K: 키
  - E: 암호 알고리즘
  - C: 암호문
  - D: 복호 알고리즘

# 대칭 암호와 공개 키 암호

## 암호 알고리즘

- 알고리즘: 복잡한 문제를 풀기위한 과정
- 암호화 알고리즘: 평문을 암호문으로 만드는 절차
- 복호화 알고리즘: 암호문을 평문으로 만드는 절차
- 암호 알고리즘: 암호화와 복호화 알고리즘을 합한 알고리즘

## 키

- 암호화할 때나 복호화할 때는 반드시 키가 필요
- 암호 알고리즘의 키는 다음과 같은 매우 긴 숫자
- 2진화된 숫자로 변경하여 사용
- 암호키의 안전

## 대칭 암호와 비대칭 암호

- 대칭 암호: 암호화를 할 때 사용하는 키와 복호화 할 때 사용하는 키가 동일한 암호알고리즘
- 비대칭 암호: 암호화를 할 때 사용하는 키와 복호화를 할 때 사용하는 키가 서로 다른 암호 알고리즘

## 비대칭 암호

- 비대칭 암호 요소
  - 송신자: 한 쌍의 키
  - 수신자: 한 쌍의 키
  - 한 쌍의 키: (공개키, 개인키) 수학적으로 밀접한 연관
- 공개 키 암호
  - 공개 키는 공개를 하므로 이 암호 알고리즘을 공개키 암호라고 한다

## 하이브리드 암호 시스템

- 대칭 암호와 공개 키 암호를 조합한 방식 (장점 조합)

# 그 밖의 암호 기술

- 기밀성: 인가된 사용자만 정보 자산에 접근할 수 있음
- 무결성: 정밀성, 정확성, 완전성, 유효성. 데이터베이스의 정확성 보장
- 인증: 정확히 본인임을 확인
- 부인방지: 데이터를 전송하거나 수신한 뒤 그 사실을 부정하지 못하도록 함

## 일방향 해시 함수

- 파일의 지문을 채취하는 기술
- 문서의 무결성 점검
- 예시
  - 파일이 어제와 오늘 동일하게 하고 싶다
  - 안전한 장소에 어제 만든 파일을 저장하고 오늘 파일과 비교하면 된다
- 파일 전체 비교가 아닌 작은 파일의 지문(해시)만을 비교
- 입력과 출력 각각 1개씩 있다. 입력을 메시지, 출력을 해시 값이라 한다
- 해시 값: 일방향 해시 함수를 사용하여 계산한 값
- 일방향 해시 함수가 만들어내는 해시 값은 메시지의 지문에 해당(8장)

## 해시 값 비교

- 소프트웨어를 다운받고 다운받은 파일의 해시 값을 계산해보고 소프트웨어의 해시 값과 비교
- 해시 값이 같으면 다운받은 파일은 제공자가 제공한 원본과 같은 것이 증명됨
- 해시 값이 다르면 웹 페이지에 게시된 내용이 변조되어 있거나 다운로드 과정에서 변질 됨

## 메시지 인증 코드

- 메시지가 생각했던 통신 상태로부터 온 것임을 확인하는 코드
- 메시지가 전송 도중에 변경되지 않았다는 것
- 무결성과 인증을 제공하는 암호 기술(9장)

## 디지털 서명

- 거짓 행세, 변경, 부인 같은 위협을 방지하는 기술
- 오프라인 세계에서 사용하는 도장이나 종이 위 서명이나 날인 개념을 온라인 세계에 적용한 것
- 디지털 서명: 무결성 확인하고, 인증과 부인 방지를 위한 암호 기술(10장)

## 의사난수 생성기

- pseudo Random Number Generator(PRNG)
- 난수열을 생성하는 알고리즘
- 난수는 키 생성에 매우 중요
- SSL/TLS 통신
  - 단 한번의 통신에만 사용할 세션 키 생성
  - 난수 생성 알고리즘이 취약하면 도청자가 암호에 사용하는 키를 추측할 수 있음
  - 통신의 기밀성 손상 위험
  - 의사 난수 생성기 및 난수(13장)

# 암호학자의 도구 상자

- 대칭 암호
- 공개 키 암호
- 일방향 해시함수
- 메시지 인증 코드
- 디지털 서명
- 의사 난수 생성기

## 보안 위협과 암호 기술에 의한 방지

- 보안위협 - 위협받는 특성 - 방지를 위한 암호기술
- 도청 - 기밀성 - 대칭 암호, 공개키 암호
- 메시지 변경 - 무결성 - 대칭암호, 공개키암호, 일방향 해시함수, 메시지 인증코드, 디지털 서명
- 위장 - 인증 - 대칭 암호, 공개키 암호, 메시지 인증 코드, 디지털 서명
- 부인 - 부인 봉쇄 - 디지털 서명

# 스테가노그라피와 디지털 워터마킹

## 스테가노 그라피

- 크립토그라피: 메시지 내용을 읽지 못하게 하는 기법
- 스테가노그라피
  - 메시지의 내용을 읽지 못하게 하는 것이 아니라 메시지의 존재 자체를 숨기는 기법
  - 메시지를 숨겨 넣는 방법을 알게 되면 메시지의 내용은 금방 노출
  - 예시
    - 서로 믿을 수 있는 친구를 만나는 일은 즐겁습니다
    - 울적한 날에도 기분을 좋게 합니다
    - 역시 좋은 친구는 삶의 활력소입니다
    - 열심히 사는 사람들도
    - 시간이 없다는 핑계로 친구를 멀리하기도 합니다
    - 반드시 우리가 소중하게 생각해야하는 것이 친구입니다.
      > 서울역열시반

## 디지털 워터마킹

- 파일 중에 저작권자나 구입자의 정보를 집어넣는 기술
- 디지털 워터마킹 기술에 스테가노그라피 사용

#### 암호 + 스테가노그라피

- 집어넣고 싶은 문장을 암호화해서 암호문을 작성한다
- 그 위에 스테가노 그라피를 사용해서 암호문을 화상 파일에 숨긴다
  - 암호문이 있다는 것을 알아채도 심어 넣은 문장의 내용은 읽을 수 없다

# 암호와 보안 상식

## 비밀 암호 알고리즘을 사용하지 말 것

- 비밀암호 알고리즘을 만들어서 사용할 것이 아니라 공개되어 있는 강한 알고리즘을 사용해야 함
  - 암호 알고리즘의 비밀은 반드시 폭로된다
    - 1999년 DVD 암호 알고리즘 폭로됨
    - 2007년 NXP의 비접촉형 IC카드 MIFARE Classic 암호 알고리즘 해석됨
    - RSA사가 개발한 RC4라는 암호 알고리즘 구조 -> RC4와 호환성 있는 프로그램 공개됨
      > 암호의 강도는 알고리즘 구조의 복잡성과 비밀 값에 의해 증명됨
  - 강한 암호 알고리즘을 만드는 것은 매우 어렵다
    - 강한 암호 알고리즘과 약한 암호 알고리즘을 비교하는 것은 매우 어려운 작업이다
    - 암호 알고리즘의 강도를 증명하는 것은 불가능하다
    - 전문 암호 해독자들이 암호 알고리즘 해독에 몇 년이 걸렸지만 실패했다 -> 암호의 강도가 강하다

#### 숨기는 것에 의한 보안

- 암호 알고리즘을 비밀로 해서 보안을 유지하려는 행위
- 전문가가 볼 때 위험하고 어리석은 행위로 간주됨

## 약한 암호는 암호화 하지 않는 것보다 위험

- 사용자는 암호의 강도와는 상관 없이 암호화되어 있다는 사실만으로 안심하는 경향
- 약한 암호를 사용하려면 처음부터 암호 따위를 사용하지 않는 것이 낫다

## 어떤 암호라도 언젠가는 해독된다

- 모든 키를 하나도 빠짐없이 시도해 봄으로서 언젠가는 반드시 해독
- 암호문이 해독되기까지 시간과 암호를 사용하여 지키고 싶은 평문의 가치와의 밸런스가 중요
- 절대로 해독 불가한 암호 알고리즘 존재
  - 일회용 패드
    - 현실적으로 활용하기에는 적합하지 않음

## 암호는 보안의 아주 작은 부분

- 사회공학적인 공격 방법은 암호의 강도 그 자체와는 아무런 관계가 없다
- 보안 시스템의 강도는 보안 시스템을 구성하는 여러 링크 중 가장 약한 링크의 강도와 같다
  - 가장 약한 링크는 암호가 아니라 사람

#### 사회공학적 공격

- 피싱: 유명기관을 사칭한 위장된 홈페이지로 유인하여 인터넷상에서 개인의 금융정보를 불법적으로 알아내서 이용함
- 트로이 목마: 컴퓨터 악성 코드를 유용한 프로그램인 것처럼 위장하여 사용자들이 거부감없이 설치 유도하는 프로그램
- 키로거: 컴퓨터 사용자의 키보드 움직임을 탐지해 ID나 패스워드, 계좌 번호 등과 같은 개인의 중요한 정보를 몰래 빼가는 해킹 공격

# 퀴즈

## 일기의 암호

앨리스는 매일 워드프로세서로 일기를 쓴다. 누군가가 읽지 못하게 하기 위해 디스크에 저장할 때는 매번 암호화를 하고 있다. 일기를 다시 읽고 싶을 때는 그때마다 복호화를 하고 있다. 이 경우 송신자와 수신자는 각각 누구인가

> 송신자: 앨리스(암호화 할 때), 수신자: 앨리스(복호화 할 때)

## 기초 지식의 확인

1. 평문을 암호문으로 변환하는 것을 암호화라고 한다 -> O
2. 평문은 사람이 읽은 데이터이고, 암호문은 컴퓨터가 읽은 데이터이다 -> X (암호화 되었는지 아닌지가 기준)
3. 메일 송신자 란을 조사하면 그 메일의 송신자가 누구인지 정확하게 판단할 수 있다 -> X (위조 가능)
4. 대칭 암호에서는 암호화 키와 복호화 키가 같다 -> O
5. 공개되어 있는 암호 알고리즘은 악의적인 의도를 가진 자로부터 공격을 받기 쉽기 때문에 회사에서 자체 개발한 비밀 알고리즘을 사용하는 것이 더 안전하다 -> X (자체 개발이 더 위험)
