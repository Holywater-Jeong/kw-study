# 7주차. 디지털 영상처리

# 디지털 영상처리

- 컴퓨터로 영상을 처리하는 것
- 컴퓨터를 이용하여 영상을 생성하고 처리하고 해석하며 인식하는 영상과 관련된 모든 분야를 의미

## 사진

물체에 반사되는 빛 신호를 표현한 것

## 아날로그 신호

수로 나타낼 수 없는 연속적인 신호 (빛, 전압 등)

#### 특징

- 조작 쉽지 않음
- 영구 보관 어려움
- 처리를 위해서 특수한 장비, 전문적 기술 필요

## 디지털 신호

아날로그 신호를 구성된 사진 영상을 디지털 신호로 변환한 것

#### 특징

- 데이터 값이 명확함 -> 아날로그 보다 화질 우수
- 쉽게 얻을 수 있음
- 디지털 데이터를 여러 가지 방법으로 처리 가능
- 디지털 데이터 저장장치를 이용해 영구적 데이터 저장 가능
- 디지털 영상 전송 가능

# 빛과 색

## 가시광선

- 인간이 볼 수 있는 빛의 영역
- 인간은 가시광선으로 색을 인식함
- 파장의 길이에 따라 성질이 변화하여 각각의 색깔로 나타나는데 빨간색에서 보라색으로 갈수록 파장이 짧아짐

## 컬러, 흑백 디지털 영상

#### 흑백 디지털 영상

이진영상(검은색, 흰색으로 구성)과 그레이 레벨영상(검정색, 회색, 흰색으로 구성) 분류

#### 컬러 디지털 영상

- 색 정보를 세 가지 지각 변수(색상, 채도, 명도)로 인식
- 색상 + 채도 = 색도(chromaticity)

## 대비

- 디지털 영상에서 명도의 관계를 나타내는 것
- 가장 어두운 영역부터 가장 밝은 영역까지의 범위를 나타냄
- 인간의 지각 작용이 단순한 명도보다는 명도의 대비에 더 민감함
- 동시적 대비는 명도의 느낌이 배경의 명도에 크게 의존함

# 컬러모델

- RGB, CMY(K), HIS, YCrCb, YUV 등이 있음

## RGB 컬러 모델

- Red, Green, Blue 세 가지 색상 값 이용
- 색을 혼합할 수록 색이 밝아지는 가산체계
- RGB를 같은 비율로 혼합 -> 가장 밝은 흰색
  - R(1, 0, 0), G(0, 1, 0), B(0, 0, 1) = White(1, 1, 1)
  - R+G = Yellow
  - G+B = Cyan
  - B+R = Magenta

## CMY 컬러 모델

- 청록색(Cyan), 자홍색(Magenta), 노란색(Yellow)을 기본색으로 사용
- RGB 컬러 모델에서 대각선으로 마주보는 색의 모양을 서로 바꿔놓은 것 처럼 보임
- C, M, Y 세 가지 색을 더하면 검정색이 되어 색의 밝기가 낮아지는 감산체계 사용
- RGB 컬러와는 정반대 공간에 위치하므로, 청록색-빨간색, 자홍색-초록색, 노란색-파란색은 보색 관계
- RGB -> CMY 상으로 변환
  - CMY = 111 - RGB
- CMY -> RGB 상으로 변환
  - RGB = 111 - CMY

## HSI 컬러 모델

- Hue(색상), Saturation(채도), Intensity(명도)
- RGB -> HSI 공식
  - I = R+G+B / 3
  - S = 1 - (R+G+B / 3)min(R, G, B)
  - H = cos-1 - 0.5 \* {(R - G) + (R + B)} / 루트((R-G)2승 + (R-B)(G-B))
- HSI -> RGB 공식 (컬러의 영역에 따라 다름)
  - 복잡하다 PPT 참조

## YCrCb 모델

- 명도에는 더 민감한 인간 눈을 감안해 YCrCb 컬러 모델 개발
- 명도는 Y, 붉은색 정보를 Cr, 푸른색 정보를 Cb로 기호화
- 눈에 민감한 명도 정보 Y는 그대로 유지. 민감하지 않은 Cr과 Cb 색상 정보는 그 양을 줄여서 사용
- 정지영상 압축 표준 방식인 JPEG와 동영상 압축 표준 방식인 MPEG에서 사용
- RGB -> YCrCb 공식
  - Y = 0.299R + 0.587G + 0.114B
  - Cr = 0.500R + 0.419g - 0.0813b
  - cB = -0.169R - 0.331G + 0.500B
- YCrCb -> RGB 공식
  - R = 1.000Y + 1.402Cr + 0.000Cb
  - G = 1.000Y - 0.714Cr - 0.344Cb
  - B = 1.000Y + 0.000Cr + 1.772Cb

## YIQ와 YUV 컬러 모델

- YCrCb 컬러 모델과 거의 유사
- YIQ: 북미와 우리나라 TV 표준 방식인 NTSC 시스템에서 사용
- YUV: 유럽의 TV 표준 방식인 PAL 시스템에서 사용
- 색의 밝기 성분인 명도 Y와 색상 성분인 IQ나 UV분으로 분해됨
- 압축해도 화질이 떨어지지 않는 것은 YCrCb와 같으며 흑백 TV와도 호환됨
- TV 방송에서 컬러와 흑백을 동시에 수행하면 흑백 TV는 명도 성분의 Y만으로 방송 가능함
- 공식
  - RGB -> YIQ 공식
    - Y = 0.299R + 0.587G + 0.114B
    - I = 0.596R - 0.274G - 0.322B
    - Q = 0.211R - 0.523G - 0.312B
  - RGB -> YUV 공식
    - Y = 0.299R + 0.587G + 0.114B
    - U = -0.147R + 0.289G + 0.437B
    - V = 0.615R - 0.515G - 0.100B
  - YIQ -> RGB 공식
    - R = -1.129Y + 3.306I - 3.000Q
    - G = 1.607Y - 0.934I + 0.386Q
    - B = 3.458Y - 3.817I + 5.811Q
  - YUV -> RGB 공식
    - R = 1.000Y + 0.000U + 1.403V
    - G = 1.000Y - 0.344U - 0.714V
    - B = 1.000Y + 1.773U + 0.000V

# 신호의 분류

## 아날로그 신호

- 시간에 대해 연속적인 신호
- 자연계의 신호

## 디지털 신호

- 불연속 신호
- 아날로그 신호로부터 디지털화 과정으로 얻어짐
- 디지털 과정을 거침
  - 표본화, 양자화, 부호화 3단계

#### 표본화

- 연속된 신호 파형에서 일정한 시간 간격으로 값을 취해 불연속적인 신호로 변환하는 것
- 표본: 표본화된 파형 높이의 값
- 표본화 주기: 일정한 시간 간격
- 표본화 정리
  - 원래 아날로그 신호로 복원해 주는 최대 표본화 주기를 알려줌
  - 아날로그 신호에 있는 최대 주파수의 두 배 이상으로 표본화하면 원 아날로그 신호로 복원할 수 있어 정보 손실 없이 재생 가능
- 표본화 과정에서 얻은 표본 값을 그대로 이진 데이터로 표현하는 것은 비효율적

#### 양자화

- 표본 값을 디지털 장치나 컴퓨터에서 표현할 수 있는 근사 값으로 변환하는 과정
- 양자화 비트 수: 표본 값을 정밀하게 표현하는데 사용하는 비트 수
- 디지털화의 최종 단계

#### 부호화

- 양자화된 표본 값을 디지털 정보로 표현, 이진수
- 디지털 영상은 데이터 양이 매우 크므로 십진수를 바로 이진수로 변환하는 방법은 비효율적임
- 보통 압축 부호화를 수행하여 십진수를 이진수로 변환

# 영상 신호

- 가로와 세로 방향으로 차원이 두 개 있어 2차원 신호라고 함
- 1차원 신호를 2차원으로 확장한 신호가 영상 신호
- 아날로그 영상과 디지털 영상으로 분류됨

## 아날로그 영상

- 연속 색조 영상이라고 함
- 다양한 명암과 색이 혼합되어 원래의 영상을 정확히 재현함

## 디지털 영상

- 아날로그 영상을 디지털화하는 과정에서 얻을 수 있음
- 디지털화하는 과정도 표본화, 양자화, 부호화로 구성
- 밝기의 불연속점으로 구성

#### 디지털 영상의 생성

- 아날로그 영상에서 공간적, 시간적으로 연속되는 밝기 강도의 주사선을 따라 이산적인 점을 추출하는 것
- 아날로그 영상의 연속적인 명도를 별개의 이산적인 점으로 분리
- 표본화로 생산한 이산적인 점이 디지털 영상을 구성하는 최소 단위(화소, 픽셀, 펠)
- 표본 주기가 짧은 경우 원래 아날로그 영상만큼 화질 좋으나, 데이터 양 큼, 긴 경우는 반대
- 표본화된 각 화소의 밝기나 색을 정해진 몇 단계의 값으로 근사화 시키는 과정
- 각 화소의 밝기나 색이 숫자로 표현되어 화소에 양자화된 표본 값이 생기게 됨
- 1차원 신호에서처럼 양자화된 화소의 밝기나 색 데이터를 이진수로 표현하는 과정
- 디지털 영상의 데이터 양은 굉장히 많으므로 단순히 이진수로 변환하지 말고 압축 부호화를 수행해야 함

# 해상도

- 아날로그 영상 요소를 분해하여 디지털로 영상화해주는 능력
- 디지털 영상의 화질을 결정하는 데 사용하는 요소
- 공간 해상도와 밝기 해상도로 구분됨
- 공간 해상도: 디지털 영상이 몇 개의 화소로 구성되었는지를 나타냄
- 밝기 해상도
  - 디지털 영상 화소의 밝기나 색 값이 얼마나 정확하게 원 영상의 명암을 표현할 수 있느냐를 나타냄
  - 양자화할 때 비트 수를 어느 정도까지 사용하느냐로 결정됨
  - 양자화 비트 수는 밝기 해상도를 나타냄
- 컬러 해상도
  - 컬러 영상에서도 표본화, 양자화, 공간 및 명도 해상도 개념이 똑같이 사용됨
  - 표본화와 양자화로 결정하는 해상도도 이 컬러 요소 세 개의 명도 값에 따라 달라짐
  - 컬러 영상의 공간 해상도와 컬러 영상의 밝기 해상도는 이 컬러 요소 세 개가 적용되어 각각 세 개씩 있음
  - 컬러 요소 세 개의 공간과 밝기 해상도는 서로 다를 수 있음

# 영상 종류

## 이진영상

- 화소 값이 두 가지만 있는 영상
- 양자화 비트 수를 1로 하여 양자화를 수행해서 얻으므로 값이 1과 0 밖에 없음
- 값이 두 종료 밖에 없어 처리 속도가 빠르다는 장점
- 경계 구분이 정확하지 않는 영상에서 영상 정보가 손실될 수 있음
- 지문, 팩스, 문자, 영상 등이 이진 영상에 해당 됨

## 그레이레벨 영상

- 이진 영상보다는 더 밝음
- 각 화소의 밝기가 여러 단계로 보통 흑백 사진이 이에 해당됨
- 밝기의 단계는 검정색에서 시작해서 중간에 회색이 있고 마지막에 흰색으로 끝남
- 단계의 수는 양자화 비트 수(n)로 결정됨
- 디지털 영상 처리는 기본적으로 그레이 레벨 영상으로 처리함

## 컬러 영상

- 실제로 눈에 보이는 모습과 비슷하게 밝기와 색상을 표현하는 영상
- 빛의 삼원색인 R, G, B를 이용하여 모든 색을 표현할 수 있다는 사실이 알려지며 등장
- 각 색을 그레이레벨 영상처럼 독립적 형태로 처리하여 그 결과를 다시 합침
- 각 색의 상호작용이 너무 커서 영상을 처리하는 데 어려움이 있음
